<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSL Forge by Naman Lumbhani - Exquisite Sketch Artwork & Samples</title>
    <meta name="description" content="Explore the sketch artwork of Naman Lumbhani (NSL Forge). Showcasing hand-drawn portraits, character sketches, and conceptual art. Connect for collaborations in Navsari, Gujarat.">

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            /* Darker Professional Palette (Consistent) */
            --color-bg-dark: #121212;
            --color-bg-light: #1e1e1e;
            --color-text-light: #ffffff;
            --color-text-dark: #b0b0b0;
            --color-header-footer: #121212;
            --color-primary-button: #bb86fc; /* Purple */
            --color-highlight: #03dac6; /* Teal */
            --color-secondary-accent: #3700b3; /* Dark Purple */
            --color-border: #333333;
            --color-dark-grey: #b0b0b0;
            --color-medium-grey: #808080;
            --color-white: #ffffff;
            --color-alert: #cf6679; /* Reddish for warnings */
            --color-error-text: #cf6679;

             /* Subtle gradients */
             --gradient-primary: linear-gradient(90deg, var(--color-primary-button), var(--color-secondary-accent));
             --gradient-highlight: linear-gradient(90deg, var(--color-highlight), var(--color-primary-button));

             /* Added for subtle depth */
             --shadow-deep: 0 10px 20px rgba(0,0,0,0.6);
             --shadow-medium: 0 6px 12px rgba(0,0,0,0.5);
             --shadow-light: 0 3px 6px rgba(0,0,0,0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.7; /* Slightly increased for readability */
            color: var(--color-text-dark);
            background-color: var(--color-bg-dark);
            scroll-behavior: smooth;
            perspective: 1200px; /* Increased perspective for 3D effects */
            overflow-x: hidden; /* Prevent horizontal scroll issues with 3D */
        }

        .container { width: 90%; max-width: 1400px; margin: auto; overflow: hidden; padding: 0 20px; }

        /* General Section Styling */
        section {
            padding: 120px 0;
            border-bottom: 1px solid var(--color-border);
            background-color: var(--color-bg-dark);
            min-height: 80vh; /* Ensure sections are tall enough to trigger visibility */
            position: relative;
            overflow: hidden; /* Keep section content contained */
            transform-style: preserve-3d; /* Ensure children participate in 3D */

            /* Initial state for scroll-in animation */
            opacity: 0;
            transform: translateY(50px) rotateX(5deg);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }

         /* Sections that should start visible (like Hero) */
         #hero {
             opacity: 1;
             transform: none;
             transition: none; /* No transition on hero visibility */
         }


        /* The 'is-visible' class overrides the initial state */
        section.is-visible {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
        }

        section:last-of-type { border-bottom: none; }
        #gallery { background-color: var(--color-bg-light); } /* Only gallery and disclaimer use light background */
        #disclaimer { padding: 60px 0; background-color: var(--color-bg-light); border-bottom: 1px solid var(--color-border); min-height: auto; }

        /* Section Headings */
        section h2 {
             font-family: 'Playfair Display', serif; font-size: 3rem; font-weight: 700;
             color: var(--color-text-light); text-align: center; margin-bottom: 50px;
             position: relative;
             padding-bottom: 15px;
             letter-spacing: 0.8px;
        }
         section h2::after {
             content: ''; position: absolute; bottom: 0; left: 50%;
             transform: translateX(-50%); height: 3px; width: 80px;
             background: var(--gradient-primary); border-radius: 2px;
         }

         #disclaimer h2 {
             font-size: 2rem;
             margin-bottom: 30px;
             padding-bottom: 10px;
         }
         #disclaimer h2::after {
             height: 2px; width: 50px;
         }


        /* Header */
        header {
            background: var(--color-header-footer);
            padding: 0.8rem 0;
            position: fixed; width: 100%; top: 0; left: 0; z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            transition: background-color 0.3s ease;
        }
        header .container {
             display: flex;
             justify-content: space-between;
             align-items: center;
             flex-direction: row;
             padding: 0 20px;
        }
        header .logo a {
            text-decoration: none;
            color: var(--color-primary-button);
            display: block;
            font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 700;
            transition: color 0.3s ease, transform 0.3s ease;
             text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        header .logo a:hover { color: var(--color-highlight); transform: scale(1.05); }
        nav ul { list-style: none; padding: 0; margin: 0; display: flex; }
        nav ul li { margin-left: 35px; } /* Increased spacing */
        nav ul li a {
            color: var(--color-text-dark);
            text-decoration: none; font-weight: 400;
            padding: 10px 0; position: relative; transition: color 0.3s ease, transform 0.2s ease; letter-spacing: 0.6px; /* Increased letter spacing */
             font-size: 1.05rem; /* Slightly larger font */
        }
        nav ul li a::after {
            content: ''; position: absolute; left: 0; bottom: -3px; height: 2px; width: 0;
            background: var(--gradient-primary); /* Use gradient for underline */
            transition: width 0.4s ease-out; /* Slower underline animation */
        }
        nav ul li a:hover, nav ul li a.active { color: var(--color-text-light); transform: translateY(-2px); }
        nav ul li a:hover::after, nav ul li a.active::after { width: 100%; } /* Underline animation on hover/active */
        nav ul li a.active { color: var(--color-text-light); } /* Ensure active stays light */


        .menu-toggle { display: none; font-size: 2rem; cursor: pointer; color: var(--color-text-light); transition: transform 0.3s ease, color 0.3s ease; }
        .menu-toggle:hover { transform: rotate(90deg); color: var(--color-highlight); }

        /* Hero Section - Enhanced 3D Integration */
        #hero {
            background: linear-gradient(rgba(18, 18, 18, 0.9), rgba(18, 18, 18, 0.9)); /* Darker overlay */
            color: var(--color-text-light);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding-top: 80px;
            position: relative;
            overflow: hidden;
        }

        /* Container for the 3D element */
        #hero .hero-3d-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* Place behind hero content */
        }

         /* Style for the Three.js canvas */
        #hero-canvas {
            display: block; /* Remove extra space below canvas */
            width: 100% !important; /* Important to override potential inline styles */
            height: 100% !important; /* Important to override potential inline styles */
            filter: blur(3px) brightness(0.7); /* Increased blur and reduced brightness */
            opacity: 0.5; /* Reduced opacity */
            transition: filter 0.5s ease, opacity 0.5s ease;
        }
         /* Optional: Hover effect on the canvas area */
         #hero .hero-3d-container:hover #hero-canvas {
             filter: blur(2px) brightness(0.8);
             opacity: 0.7;
         }

         /* Style for the fallback message */
        #hero-fallback-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--color-text-dark);
            font-size: 1.1rem;
            text-align: center;
            z-index: 1; /* Below content */
            display: none; /* Hidden by default */
             padding: 20px;
             background-color: rgba(0,0,0,0.5);
             border-radius: 8px;
        }


        /* Ensure hero content is above the 3D */
        #hero .hero-content {
             z-index: 2;
             position: relative;
             max-width: 1000px;
             padding: 0 20px;
        }
        #hero h1 {
            font-family: 'Playfair Display', serif; font-size: 5rem; margin-bottom: 20px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.8); /* Stronger shadow */
            font-weight: 700; letter-spacing: 1.5px; line-height: 1.1; /* Increased letter spacing */
            color: var(--color-text-light);
             transform: translateZ(20px); /* Add 3D depth */
        }
         #hero h1 .site-title { font-weight: 700; color: var(--color-primary-button); }
        #hero p {
            font-size: 1.5rem; margin-bottom: 50px; max-width: 800px; /* Increased margin */
            text-shadow: 1px 1px 6px rgba(0,0,0,0.6); /* Stronger shadow */
            font-weight: 300;
            color: var(--color-text-dark);
            line-height: 1.7;
             transform: translateZ(10px); /* Add 3D depth */
        }

        .cta-button {
            display: inline-block;
            background: var(--gradient-primary); /* Use gradient as initial background */
            color: var(--color-bg-dark);
            padding: 16px 40px; /* Increased padding */
            text-decoration: none; border-radius: 30px; font-size: 1.3rem; font-weight: 500;
            transition: background-color 0.4s ease, transform 0.3s ease-out, box-shadow 0.4s ease, color 0.4s ease; /* Added color to transition */
            border: none; cursor: pointer; box-shadow: var(--shadow-medium);
             overflow: hidden;
             position: relative;
             z-index: 1;
        }
         /* Pseudo-element for hover gradient effect */
         .cta-button::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: var(--gradient-highlight);
             transition: left 0.4s ease-out; /* Smoother transition */
             z-index: -1;
         }
        .cta-button:hover::before {
             left: 0;
         }
        .cta-button:hover {
            background: transparent; /* Transparent background on hover */
            color: var(--color-text-light); /* Text color changes on hover */
            transform: translateY(-4px); /* More pronounced lift */
            box-shadow: var(--shadow-deep); /* Deeper shadow on hover */
        }
        .cta-button:active { transform: translateY(-1px); box-shadow: var(--shadow-light); }


        /* Gallery */
        .sketch-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 30px; }
        .sketch-gallery img {
            display: block; width: 100%; height: auto; /* THESE LINES MAINTAIN ASPECT RATIO */
            border-radius: 8px; /* Slightly larger radius */
            box-shadow: var(--shadow-medium); /* Medium shadow */
            border: 1px solid var(--color-border);
            transition: transform 0.5s ease-out, box-shadow 0.4s ease, border-color 0.3s ease; /* Slower transform */
             cursor: pointer;
             transform-style: preserve-3d;
             transform-origin: center center;
             filter: brightness(0.9); /* Slightly dimmed initially */
        }
        /* 3D Hover effect for gallery images */
        .sketch-gallery img:hover {
            transform: scale(1.08) rotateY(10deg) rotateX(6deg) translateZ(20px); /* More pronounced 3D */
            box-shadow: var(--shadow-deep); /* Deeper shadow */
             border-color: var(--color-primary-button);
             filter: brightness(1.1); /* Brighter on hover */
        }

        /* Services/Collaborations */
        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 50px; margin-top: 40px; } /* Increased gap and min-width */
        .service-card {
            background: var(--color-bg-light);
            padding: 40px; border-radius: 12px; /* Larger radius */
            box-shadow: var(--shadow-medium); /* Medium shadow */
            text-align: center;
            transition: transform 0.4s ease, box-shadow 0.4s ease, background-color 0.3s ease, border-color 0.3s ease; /* Added border transition */
            border: 1px solid var(--color-border);
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
             cursor: default;
             transform-style: preserve-3d;
             transform: translateZ(0); /* Ensure it's on its own layer for initial state */
        }
        .service-card:hover {
            transform: translateY(-10px) translateZ(15px); /* More pronounced lift and depth */
            box-shadow: var(--shadow-deep); /* Deeper shadow */
            background-color: #282828;
             border-color: var(--color-primary-button); /* Highlight border on hover */
        }
        .service-card .icon { font-size: 4rem; color: var(--color-primary-button); margin-bottom: 25px; display: block; /* Larger icon */
             transition: transform 0.3s ease;
        }
         .service-card:hover .icon {
             transform: scale(1.1) rotate(5deg); /* Subtle icon animation on card hover */
         }
        .service-card h3 { font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 15px; color: var(--color-text-light); font-weight: 600; letter-spacing: 0.5px;}
        .service-card p { font-size: 1rem; color: var(--color-text-dark); margin-bottom: 0; line-height: 1.7; }

        .service-process { margin-top: 80px; padding-top: 40px; border-top: 1px dashed var(--color-border); text-align: left; }
        .service-process h3 {
            font-family: 'Playfair Display', serif; color: var(--color-text-light); margin-top: 0; margin-bottom: 30px; /* Increased margin */
            font-size: 2.2rem; text-align: center; font-weight: 600;
        }
        .service-process ol, .service-process ul { list-style-position: outside; padding-left: 30px; margin: 25px auto; max-width: 900px; color: var(--color-text-dark); font-size: 1.05rem; line-height: 1.8; /* Increased line height */ }
        .service-process li { margin-bottom: 15px; padding-left: 8px; position: relative; } /* Increased margin */
        .service-process ol li::marker { font-weight: bold; color: var(--color-primary-button); font-size: 1.2em; } /* Larger marker */
        .service-process ul li::before { content: 'â€¢'; color: var(--color-primary-button); font-weight: bold; display: inline-block; width: 1em; margin-left: -1em; font-size: 1.2em; } /* Larger bullet */
        #disclaimer p { max-width: 900px; margin: 20px auto; font-size: 1.05rem; color: var(--color-text-dark); line-height: 1.7; text-align: center; }
        .service-process li strong { color: var(--color-text-light); font-weight: 500; }
        .important-note { text-align: center; font-size: 1rem; color: var(--color-alert); margin-top: 20px; font-weight: 500; }
        .important-note i { margin-right: 8px; }


        #about .container { display: flex; flex-direction: column; align-items: center; text-align: center; }
        #about p { max-width: 900px; margin-bottom: 30px; font-size: 1.1rem; color: var(--color-text-dark); line-height: 1.8; } /* Increased line height */
        #about p:last-of-type { margin-bottom: 0; }
         #about p a { color: var(--color-primary-button); text-decoration: none; transition: color 0.3s ease, text-decoration 0.3s ease; font-weight: 500; }
         #about p a:hover { color: var(--color-highlight); text-decoration: underline; }


        #contact { background: var(--color-bg-dark); }
        .contact-form {
            max-width: 650px; margin: 60px auto; padding: 50px; /* Increased padding and margin */
            background: var(--color-bg-light);
            border-radius: 12px; box-shadow: var(--shadow-deep); /* Deeper shadow */
            border: 1px solid var(--color-border);
             position: relative;
        }

        .contact-form label { display: block; margin-bottom: 12px; font-weight: 500; color: var(--color-text-light); font-size: 1.1rem; letter-spacing: 0.3px;}
        /* Styles for standard inputs */
        .contact-form input[type="text"],
        .contact-form input[type="email"],
        .contact-form textarea {
            width: 100%; padding: 15px; margin-bottom: 25px; /* Increased margin */
            border: 1px solid var(--color-border);
            border-radius: 8px; font-size: 1rem; color: var(--color-text-light);
            background-color: var(--color-bg-dark);
            box-sizing: border-box; appearance: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

         /* Styling for the phone input prefix container - make it look like a single input */
         .phone-input-container {
             display: flex; /* Use flexbox for alignment */
             align-items: center; /* Vertically center items */
             margin-bottom: 25px; /* Match other input margin bottom */
             border: 1px solid var(--color-border); /* Match other input border */
             border-radius: 8px; /* Match other input border-radius */
             background-color: var(--color-bg-dark); /* Match other input background */
             padding: 0 15px; /* Match horizontal padding of other inputs */
             transition: border-color 0.3s ease, box-shadow 0.3s ease; /* Match other input transition */
             box-sizing: border-box; /* Include padding and border in element's total width and height */
             width: 100%; /* Make it fill the container like other inputs */
         }

          .phone-input-container:focus-within { /* Style container when input inside is focused */
             border-color: var(--color-primary-button); box-shadow: 0 0 10px rgba(187, 134, 252, 0.6); /* More prominent shadow */
             outline: none; /* Remove outline from input */
         }

         .phone-input-container .country-code {
             color: var(--color-text-dark); /* Muted grey text for prefix */
             font-size: 1rem; /* Match input font size */
             margin-right: 10px; /* Increased space */
             flex-shrink: 0; /* Prevent shrinking */
             flex-grow: 0; /* Prevent growing */
             padding: 15px 0; /* Match vertical padding of the input text */
         }

          .phone-input-container .country-code .flag {
             margin-right: 6px; /* Increased space between flag and +91 */
             font-size: 1.3rem; /* Slightly larger flag */
         }

         .contact-form input[type="tel"] {
             flex-grow: 1; /* Allow input to take remaining space */
             border: none; /* Remove border from input itself */
             padding: 15px 0; /* Match vertical padding, no horizontal padding here */
             margin: 0; /* Remove margin */
             background-color: transparent; /* Transparent background */
             color: var(--color-text-light); /* Light text color */
             font-size: 1rem;
             outline: none; /* Remove default input outline */
             box-shadow: none; /* Remove box shadow */
             transition: none; /* Remove transition */
             width: auto; /* Allow flex-grow to control width */
         }


        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus,
        .contact-form textarea:focus,
         .phone-input-container:focus-within { /* Apply focus style to container */
            border-color: var(--color-primary-button); box-shadow: 0 0 10px rgba(187, 134, 252, 0.6); /* More prominent shadow */
            outline: none;
        }
        .contact-form textarea { min-height: 200px; resize: vertical; padding: 15px; /* Ensure textarea has padding */ }


        .drop-zone {
            border: 2px dashed var(--color-border); border-radius: 8px; padding: 40px; text-align: center;
            cursor: pointer; margin-bottom: 25px;
            transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: #282828;
            position: relative;
            transform-style: preserve-3d;
        }
         .drop-zone:hover {
             background-color: #333333;
             border-color: var(--color-primary-button);
             box-shadow: 0 0 8px rgba(187, 134, 252, 0.4);
         }

        .drop-zone.dragover { background-color: rgba(187, 134, 252, 0.15); border-color: var(--color-primary-button); border-style: solid; box-shadow: 0 0 18px rgba(187, 134, 252, 0.5); /* More prominent dragover style */ }
        .drop-zone.error { border-color: var(--color-error-text); background-color: rgba(207, 102, 121, 0.15); border-style: solid; box-shadow: none; } /* Changed to solid border for clarity */
        .drop-zone p { margin: 0; font-size: 1rem; color: var(--color-text-dark); z-index: 2; position: relative; }
        .file-info { margin-top: 15px; font-size: 0.95rem; color: var(--color-text-dark); font-weight: 500; z-index: 2; position: relative; }
        .file-info.error-message { color: var(--color-error-text); font-weight: bold; }

        .contact-form button[type="submit"] {
            background: var(--gradient-primary); /* Use gradient initially */
            color: var(--color-bg-dark);
            padding: 16px 35px; /* Increased padding */
            border: none; border-radius: 30px; font-size: 1.3rem; font-weight: 600;
            transition: background-color 0.4s ease, transform 0.3s ease-out, box-shadow 0.4s ease, color 0.4s ease; /* Added color transition */
            width: 100%; margin-top: 40px; /* Increased margin */
            cursor: pointer; box-shadow: var(--shadow-medium);
             overflow: hidden;
             position: relative;
             z-index: 1;
        }
         .contact-form button[type="submit"]::before {
             content: '';
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: var(--gradient-highlight);
             transition: left 0.4s ease-out; /* Smoother transition */
             z-index: -1;
         }
        .contact-form button[type="submit"]:hover::before {
             left: 0;
        }
        .contact-form button[type="submit"]:hover {
             background: transparent; /* Transparent background on hover */
             color: var(--color-text-light); /* Text color changes on hover */
             transform: translateY(-4px); /* More pronounced lift */
             box-shadow: var(--shadow-deep); /* Deeper shadow */
        }
        .contact-form button[type="submit"]:active { transform: translateY(-1px); box-shadow: var(--shadow-light); }


        .contact-info p { text-align: center; font-size: 1.1rem; margin-top: 50px; color: var(--color-text-dark); } /* Increased margin */
        .contact-info p a { color: var(--color-primary-button); text-decoration: none; font-weight: bold; transition: color 0.3s ease, text-decoration 0.3s ease; }
        .contact-info p a:hover { color: var(--color-highlight); text-decoration: underline; }

        footer {
            background: var(--color-header-footer); color: var(--color-text-dark);
            text-align: center; padding: 4rem 0 1.5rem; /* Increased padding */
        }
        footer .footer-note { font-size: 0.85em; color: rgba(176, 176, 176, 0.6); margin-bottom: 20px; } /* Increased font size and margin */
        footer .social-links { margin-bottom: 25px; } /* Increased margin */
        footer .social-links a { color: rgba(176, 176, 176, 0.8); margin: 0 15px; font-size: 2.2rem; text-decoration: none; transition: color 0.3s ease, transform 0.3s ease; } /* Increased size and margin */
        footer .social-links a:hover { color: var(--color-primary-button); transform: scale(1.3); } /* More pronounced scale */
         /* Removed the copyright paragraph from the footer */

        .scroll-to-top {
            position: fixed; bottom: 30px; right: 30px; background-color: var(--color-primary-button);
            color: var(--color-bg-dark);
            width: 55px; height: 55px; border-radius: 50%; /* Slightly larger button */
            text-align: center; line-height: 55px; font-size: 1.8rem; /* Increased icon size */
            box-shadow: var(--shadow-medium);
            z-index: 900; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, background-color 0.3s ease, transform 0.3s ease;
            cursor: pointer;
        }
        .scroll-to-top.visible { opacity: 1; visibility: visible; }
        .scroll-to-top:hover { background-color: var(--color-highlight); transform: scale(1.15); } /* More pronounced scale */


        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .container { width: 92%; }
             section { padding: 100px 0; }
             section h2 { font-size: 2.8rem; margin-bottom: 45px; }
        }

        @media (max-width: 1024px) {
             .container { width: 95%; padding: 0 15px; }
             section { padding: 80px 0; }
              section:not(#hero) { /* Adjust initial transform on smaller screens */
                 transform: translateY(40px) rotateX(4deg);
              }
              section.is-visible { transform: translateY(0) rotateX(0deg); }
             section h2 { font-size: 2.5rem; margin-bottom: 40px; }
             section h2::after { width: 70px; }
             #disclaimer { padding: 50px 0; }
             #disclaimer h2 { font-size: 1.8rem; margin-bottom: 25px; }
             #disclaimer h2::after { width: 40px; }
             #disclaimer p { font-size: 1rem; margin: 15px auto; }
             #hero h1 { font-size: 4rem; margin-bottom: 15px; }
             #hero p { font-size: 1.3rem; margin-bottom: 40px; }
             .cta-button { padding: 14px 35px; font-size: 1.2rem; }
              .cta-button:hover { transform: translateY(-3px); }
             .sketch-gallery { gap: 25px; margin-top: 25px; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
             .sketch-gallery img { border-radius: 6px; }
              .sketch-gallery img:hover { transform: scale(1.07) rotateY(9deg) rotateX(5deg) translateZ(15px); }
             .services-grid { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 30px; }
             .service-card { padding: 35px; border-radius: 10px; }
             .service-card .icon { font-size: 3.5rem; margin-bottom: 20px; }
             .service-card h3 { font-size: 1.8rem; margin-bottom: 12px; }
             .service-card p { font-size: 0.95rem; }
              .service-card:hover { transform: translateY(-8px) translateZ(12px); }
             .service-process { margin-top: 60px; padding-top: 35px; }
             .service-process h3 { font-size: 2rem; margin-bottom: 25px; }
             .service-process ol, .service-process ul { padding-left: 25px; margin: 20px auto; font-size: 1rem; line-height: 1.7;}
             .service-process li { margin-bottom: 12px; }
             .service-process ol li::marker { font-size: 1.1em; } /* Slightly smaller marker on smaller screen */
             .service-process ul li::before { font-size: 1.1em; } /* Slightly smaller bullet on smaller screen */
             .important-note { font-size: 0.95rem; margin-top: 15px; }

             #about p { font-size: 1rem; margin-bottom: 25px; }
             .contact-form { max-width: 600px; margin: 50px auto; padding: 40px; border-radius: 10px; }
             .contact-form label { font-size: 1rem; margin-bottom: 10px; }
             /* Phone input container padding */
             .phone-input-container { padding: 0 14px; margin-bottom: 20px;}
             .phone-input-container .country-code { font-size: 0.95rem; margin-right: 8px; padding: 14px 0;}
             .phone-input-container .country-code .flag { font-size: 1.2rem; margin-right: 5px; }
             .contact-form input[type="tel"] { padding: 14px 0; font-size: 0.95rem; }

             .contact-form input[type="text"], .contact-form input[type="email"], .contact-form textarea { padding: 14px; font-size: 0.95rem; margin-bottom: 20px; border-radius: 7px; }

             .drop-zone { padding: 35px; margin-bottom: 20px; border-radius: 7px; }
             .drop-zone p { font-size: 0.95rem; }
             .file-info { font-size: 0.9rem; margin-top: 12px; }

             .contact-form button[type="submit"] { padding: 14px 30px; font-size: 1.2rem; margin-top: 30px; }
             .contact-info p { font-size: 1rem; margin-top: 40px; }
             footer { padding: 3rem 0 1rem; }
             footer .footer-note { font-size: 0.8em; margin-bottom: 15px; }
             footer .social-links { margin-bottom: 20px; }
             footer .social-links a { font-size: 2rem; margin: 0 12px; }
             /* Removed the copyright paragraph from here in media query */
             .scroll-to-top { width: 50px; height: 50px; line-height: 50px; font-size: 1.6rem; bottom: 25px; right: 25px; }
        }

        @media (max-width: 768px) {
            .container { padding: 0 10px; }
            header { padding: 0.6rem 0; }
            header .container { flex-direction: column; align-items: flex-start; padding: 0 10px; }
             header .logo { width: auto; margin-right: auto; }
            header .logo a { font-size: 1.5rem; }
            nav { width: 100%; order: 1; margin-top: 8px; transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out; overflow: hidden; max-height: 0; opacity: 0; }
            nav ul { flex-direction: column; width: 100%; padding: 8px 0; background: var(--color-header-footer); box-shadow: none; border-top: 1px solid rgba(255, 255, 255, 0.08); }
            nav ul.active { display: flex; max-height: 400px; opacity: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; }
            nav ul li { margin: 6px 0; width: 100%; }
            nav ul li a { color: var(--color-text-light); font-size: 1rem; padding: 8px 15px; display: block; width: 100%; letter-spacing: 0.3px;}
            nav ul li a:hover, nav ul li a.active { color: var(--color-secondary-accent); background-color: rgba(255, 255, 255, 0.08); }
            nav ul li a::after { display: none; } /* Hide underline on mobile */
            .menu-toggle { display: block; position: static; font-size: 1.8rem; }
            header .container .header-top-row { display: flex; justify-content: space-between; align-items: center; width: 100%; }
            header .container .logo, header .container .menu-toggle { margin: 0; }
            #hero { height: auto; padding: 80px 10px 40px; }
            #hero .hero-content { padding: 0 10px; }
            #hero h1 { font-size: 3rem; margin-bottom: 15px; letter-spacing: 1px;}
            #hero p { font-size: 1.1rem; margin-bottom: 30px; line-height: 1.6;}
            section { padding: 50px 10px; }
             section:not(#hero) { /* Adjust initial transform on smaller screens */
                transform: translateY(30px) rotateX(3deg);
             }
             section.is-visible { transform: translateY(0) rotateX(0deg); }
            section h2 { font-size: 2rem; margin-bottom: 35px; padding-bottom: 10px; }
            section h2::after { height: 2px; width: 50px; }
            #disclaimer { padding: 40px 10px; }
            #disclaimer h2 { font-size: 1.6rem; margin-bottom: 20px; }
            #disclaimer h2::after { width: 35px; }
            #disclaimer p { font-size: 0.95rem; margin: 10px auto;}
            .sketch-gallery { grid-template-columns: 1fr; gap: 20px; margin-top: 20px; }
            .sketch-gallery img { border-radius: 5px; }
             .sketch-gallery img:hover { transform: scale(1.06) rotateY(7deg) rotateX(4deg) translateZ(10px); }
            .services-grid { grid-template-columns: 1fr; gap: 30px; margin-top: 25px; }
            .service-card { padding: 30px; border-radius: 8px; }
            .service-card .icon { font-size: 3rem; margin-bottom: 15px; }
            .service-card h3 { font-size: 1.6rem; margin-bottom: 10px; }
            .service-card p { font-size: 0.9rem; }
             .service-card:hover { transform: translateY(-6px) translateZ(8px); }
            .service-process { margin-top: 40px; padding-top: 25px; }
            .service-process h3 { font-size: 1.8rem; margin-bottom: 20px; }
            .service-process ol, .service-process ul { padding-left: 15px; margin: 15px auto; font-size: 0.95rem; line-height: 1.6; }
            .service-process li { margin-bottom: 10px; }
            .service-process ol li::marker { font-size: 1.1em; }
             .service-process ul li::before { font-size: 1.1em; }
            .important-note { font-size: 0.9rem; margin-top: 10px; }

            #about p { font-size: 0.95rem; margin-bottom: 20px; }
            .contact-form { max-width: 95%; margin: 40px auto; padding: 30px; border-radius: 8px; }
            .contact-form label { font-size: 0.95rem; margin-bottom: 8px; }
             /* Phone input container padding */
            .phone-input-container { padding: 0 12px; margin-bottom: 20px; border-radius: 6px;}
             .phone-input-container .country-code { font-size: 0.9rem; margin-right: 6px; padding: 12px 0;}
             .phone-input-container .country-code .flag { font-size: 1.1rem; margin-right: 4px; }
             .contact-form input[type="tel"] { padding: 12px 0; font-size: 0.9rem; }

            .contact-form input[type="text"], .contact-form input[type="email"], .contact-form textarea { padding: 12px; font-size: 0.9rem; margin-bottom: 20px; border-radius: 6px; }

            .drop-zone { padding: 30px; margin-bottom: 15px; border-radius: 6px; }
            .drop-zone p { font-size: 0.9rem; }
            .file-info { font-size: 0.85rem; margin-top: 10px; }

            .contact-form button[type="submit"] { padding: 12px 25px; font-size: 1.1rem; margin-top: 25px; }
             .contact-info p { font-size: 0.95rem; margin-top: 30px; }
            footer { padding: 2rem 0 0.8rem; }
            footer .footer-note { font-size: 0.75em; margin-bottom: 10px; }
            footer .social-links { margin-bottom: 15px; }
            footer .social-links a { font-size: 1.8rem; margin: 0 10px; }
            /* Removed the copyright paragraph from here in media query */
            .scroll-to-top { width: 45px; height: 45px; line-height: 45px; font-size: 1.4rem; bottom: 20px; right: 20px; }
        }

         @media (max-width: 480px) {
             #hero h1 { font-size: 2.5rem; letter-spacing: 0.8px; }
             #hero p { font-size: 1rem; line-height: 1.5; }
             section h2 { font-size: 1.8rem; }
             #disclaimer h2 { font-size: 1.4rem; }
             .cta-button { padding: 10px 25px; font-size: 1rem; }
             .services-grid { gap: 20px; }
             .service-card { padding: 25px; }
             .service-card .icon { font-size: 2.5rem; }
             .service-card h3 { font-size: 1.4rem; }
             .service-process h3 { font-size: 1.6rem; }
             .service-process ol, .service-process ul { font-size: 0.9rem; line-height: 1.5; }
             .contact-form { padding: 20px; }
             .contact-form input, .contact-form textarea, .phone-input-container { font-size: 0.85rem; padding: 10px; margin-bottom: 15px;}
             .phone-input-container .country-code { font-size: 0.85rem; padding: 10px 0; }

             .drop-zone { padding: 25px; }
             .contact-form button[type="submit"] { font-size: 1rem; padding: 10px 20px; }
             footer .social-links a { font-size: 1.6rem; margin: 0 8px; }
             /* Removed the copyright paragraph from here in media query */
             .scroll-to-top { width: 40px; height: 40px; line-height: 40px; font-size: 1.2rem; }

         }

    </style>
</head>
<body>

    <header>
        <div class="container">
            <div class="header-top-row">
                <div class="logo">
                    <a href="#hero">NSL Forge</a>
                </div>
                <div class="menu-toggle" id="mobile-menu" aria-label="Toggle navigation menu">
                    â˜°
                </div>
            </div>
            <nav id="nav-menu">
                <ul>
                    <li><a href="#hero" class="active">Home</a></li>
                    <li><a href="#services">Services & Collaborations</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#gallery">Sketch Samples</a></li>
                    <li><a href="#about">About Me</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="hero">
        <div class="hero-3d-container">
            <canvas id="hero-canvas"></canvas>
            <div id="hero-fallback-message">
                 3D experience not supported on your browser or device. <br> Displaying static background.
            </div>
        </div>

        <div class="container hero-content">
            <h1>Welcome to <span class="site-title">NSL Forge</span></h1>
            <p>Exquisite sketches crafted with passion by Naman Lumbhani. Let's explore bringing your unique vision to life!</p>
            <a href="#contact" class="cta-button">Start a Project Discussion</a>
        </div>
    </section>

     <section id="disclaimer">
         <div class="container">
             <h2>Disclaimer</h2>
             <p><i class="fas fa-info-circle"></i> Please note: This website is currently run by a **14-year-old** for learning and experimental purposes. A significant portion of the website's code and design was developed with the assistance of AI tools. While every effort has been made to ensure accuracy and functionality, please understand that this site serves as a portfolio and learning project. Your understanding is appreciated.</p>
         </div>
     </section>

    <section id="services">
        <div class="container">
            <h2>Services & Collaborations</h2>
            <p style="text-align:center; margin-bottom: 40px; color: var(--color-text-dark); font-size: 1.1rem;">I offer custom sketch artwork tailored to your unique needs and vision. Here's what I specialize in and how we can collaborate:</p>
            <div class="services-grid">
                <div class="service-card">
                    <div class="icon"><i class="fas fa-pencil-ruler"></i></div>
                    <h3>Custom Artwork</h3>
                    <p>Let's work together to create unique, hand-drawn sketches. Whether it's a portrait, a character, or a conceptual piece, I aim to bring your ideas to life.</p>
                </div>
                <div class="service-card">
                    <div class="icon"><i class="fas fa-user-friends"></i></div>
                    <h3>Character Sketches</h3>
                    <p>Visualize your original characters (OCs), tabletop RPG personas, or fan art concepts brought to life with dynamic and detailed character sketches. **Reference images or detailed descriptions are required.**</p>
                </div>
                <div class="service-card">
                    <div class="icon"><i class="fas fa-lightbulb"></i></div>
                    <h3>Conceptual Sketches</h3>
                    <p>Transform your abstract ideas, narrative moments, or imaginative concepts into evocative and visually stunning sketches. **Reference images or detailed descriptions are highly recommended.**</p>
                </div>
            </div>
            <div class="service-process">
                <h3>The Collaboration Process:</h3>
                <ol>
                    <li><strong>Inquiry:</strong> Begin by reaching out with your detailed idea, including any reference photos (required for portraits/characters), preferred style, and desired dimensions.</li>
                    <li><strong>Discussion & Timeline:</strong> We will have a thorough discussion about your project's specifics. Following this, I will provide an estimated timeline for completion.</li>
                    <li><strong>Confirmation:</strong> If we decide to collaborate on the artwork, we'll confirm the details before I begin work.</li>
                    <li><strong>Creation:</strong> I will dedicate my attention to creating your sketch. Work-in-progress updates can be provided at key stages if you wish to follow along.</li>
                    <li><strong>Review & Finalization:</strong> Once complete, you will receive a watermarked preview for review. We can discuss any minor adjustments at this stage.</li>
                    <li><strong>Delivery:</strong> Upon finalization, you will receive the high-resolution digital file of your artwork (available in formats like JPG, PNG, or PDF). **Physical artwork delivery might be possible within Navsari, Gujarat, depending on the project and discussion.**</li>
                </ol>
            </div>
            <div style="text-align: center; margin-top: 50px;">
                 <a href="#contact" class="cta-button">Connect to Collaborate</a>
            </div>
        </div>
    </section>


    <section id="contact">
        <div class="container">
            <h2>Get In Touch & Collaborate</h2>
            <p style="text-align:center; margin-bottom:30px; color: var(--color-text-dark); font-size: 1.1rem;">Have a question about a potential art project or wish to discuss a collaboration? Please fill out the form below. **Remember to upload a reference image, especially for portraits and character sketches, as it helps me understand your vision.**</p>

            <div class="contact-form">
                <form action="https://formsubmit.co/nslforgeofficial@gmail.com" method="post" enctype="multipart/form-data" id="contactForm">
                    <div>
                        <label for="name">Your Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div>
                        <label for="email">Your Email:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                     <div>
                        <label for="phone">Your Phone Number:</label>
                         <div class="phone-input-container">
                             <span class="country-code">ðŸ‡®ðŸ‡³ +91</span>
                             <input type="tel" id="phone" name="Phone Number" required pattern="[0-9]{10}" title="Please enter a 10-digit phone number">
                         </div>
                         <small style="color:var(--color-text-dark); display: block; margin-top: -15px; margin-bottom: 20px;">(Please enter a 10-digit number)</small>
                    </div>
                     <div>
                        <label for="subject">Subject:</label>
                        <input type="text" id="subject" name="subject" required>
                    </div>

                    <div>
                        <label for="message">Your Message / Collaboration Details:</label>
                        <textarea id="message" name="message" required></textarea>
                    </div>

                    <div>
                         <label for="file">Upload Reference Image (Required for certain projects):</label>
                         <div class="drop-zone" id="dropZone">
                            <p>Drag & Drop your image file here, or click to select file</p>
                            <input type="file" id="file" name="image" accept="image/*" style="display: none;"> <div class="file-info" id="fileInfo"></div>
                         </div>
                         <small style="color:var(--color-text-dark); display: block; margin-top: -15px;">(Required for portraits, characters, or specific concepts)</small>
                    </div>

                    <input type="text" name="_honey" style="display:none">
                    <input type="hidden" name="_captcha" value="false">

                    <button type="submit">Send Message</button>
                </form>
            </div>
            <div class="contact-info">
                <p>Alternatively, you can reach me directly via email at: <a href="mailto:nslforgeofficial@gmail.com">nslforgeofficial@gmail.com</a></p>
                </div>
        </div>
    </section>

     <section id="gallery">
         <div class="container">
              <h2>My Sketch Samples</h2>
              <p style="text-align:center; margin-bottom: 40px; color: var(--color-text-dark); font-size: 1.1rem;">Browse through some examples of my work to get a feel for my style and quality.</p>
              <div class="sketch-gallery">
                  <img src="20250105_015608.jpg" alt="Detailed sketch of Harry Potter with Hedwig, ink on paper.">
                  <img src="IMG_20241122_193303_736.jpg" alt="A sketch of a character wearing a hat and glasses, detailed shading.">
                  <img src="IMG_20241008_190133(1).jpg" alt="Close-up sketch of a figure with strong shadows and textures.">
                   </div>
          </div>
      </section>

    <section id="about">
        <div class="container">
            <h2>About Naman Lumbhani</h2>
            <p>Hello! I'm Naman Lumbhani, the artist and creator behind NSL Forge. Sketching has been a profound passion of mine for many years. I am continuously inspired by the expressive power held within simple lines and careful shading, transforming blank surfaces into vivid depictions of ideas and emotions.</p>
            <p>NSL Forge is the evolution of my previous artistic endeavor, known as Nsl_creates (or Nsl creates). This new name reflects a refined focus and dedication to forging unique artistic pieces.</p>
            <p>Outside of the studio... You can also find me on <a href="https://www.instagram.com/nslforge" target="_blank" rel="noopener noreferrer" aria-label="Follow NSL Forge on Instagram"><i class="fab fa-instagram" aria-hidden="true"></i> Instagram (@nslforge)</a> and check out my <a href="https://www.youtube.com/@nslforgeofficial" target="_blank" rel="noopener noreferrer" aria-label="Subscribe to NSL Forge on YouTube"><i class="fab fa-youtube" aria-hidden="true"></i> YouTube channel (@nslforgeofficial)</a>. Through NSL Forge, my aspiration is to share my artistic vision and craft meaningful pieces that deeply resonate with you. I eagerly anticipate the opportunity to collaborate with you on your next unique sketch project!</p>
             </div>
    </section>


    <footer>
        <div class="container">
             <p class="footer-note">This website is for learning and experimental purposes and was built with AI assistance.</p>

            <div class="social-links">
                 <a href="https://www.instagram.com/nslforge" target="_blank" aria-label="Instagram" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
                 <a href="https://www.youtube.com/@nslforgeofficial" target="_blank" aria-label="YouTube" rel="noopener noreferrer"><i class="fab fa-youtube"></i></a>
                 </div>
             </div>
    </footer>

     <div class="scroll-to-top" id="scrollToTopBtn" aria-label="Scroll to top">
         <i class="fas fa-arrow-up"></i>
     </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r163/three.min.js"></script>

    <script>
        // Mobile Menu Toggle
        const menuToggle = document.getElementById('mobile-menu');
        const navMenu = document.getElementById('nav-menu');

        if (menuToggle && navMenu) {
            menuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                 // Optional: Toggle ARIA expanded state
                 const isExpanded = navMenu.classList.contains('active');
                 menuToggle.setAttribute('aria-expanded', isExpanded);
            });
            document.querySelectorAll('#nav-menu a').forEach(link => {
                link.addEventListener('click', function() {
                    // Close menu after clicking a link on mobile
                    if (navMenu.classList.contains('active')) {
                        // Small delay to allow click animation/ripple if any
                        setTimeout(() => {
                           navMenu.classList.remove('active');
                           menuToggle.setAttribute('aria-expanded', 'false'); // Update ARIA
                        }, 300);
                    }
                    // Handled by IntersectionObserver now for active class
                    // document.querySelectorAll('#nav-menu a').forEach(navLink => navLink.classList.remove('active'));
                    // this.classList.add('active');
                });
            });
             // Close menu if clicked outside (optional but good for UX)
            document.addEventListener('click', (event) => {
                const isClickInside = navMenu.contains(event.target) || menuToggle.contains(event.target);
                if (!isClickInside && navMenu.classList.contains('active')) {
                     navMenu.classList.remove('active');
                     menuToggle.setAttribute('aria-expanded', 'false'); // Update ARIA
                }
            });
            // Initial ARIA state
             menuToggle.setAttribute('aria-expanded', 'false');
             // Link mobile menu toggle to the nav menu it controls
             menuToggle.setAttribute('aria-controls', 'nav-menu');
             // Set role for navigation region for accessibility
             navMenu.setAttribute('role', 'navigation');
        }

        // Smooth Scrolling & Active Nav Link + Scroll-in Animation
        const sections = document.querySelectorAll('section');
        const navLi = document.querySelectorAll('nav ul li a');
        const header = document.querySelector('header');


        // Intersection Observer for scroll-in animation and active nav links
        if (header && sections.length > 0 && navLi.length > 0) {
             const headerHeight = header.offsetHeight; // Get header height dynamically

             const observerOptions = {
                 root: null, // relative to the viewport
                 rootMargin: `-${headerHeight}px 0px -30% 0px`, // Adjust threshold based on header height
                 threshold: 0.1 // Trigger when 10% of the section is visible
             };

             const sectionObserver = new IntersectionObserver((entries, observer) => {
                 entries.forEach(entry => {
                     const section = entry.target;
                     const sectionId = section.getAttribute('id');
                     const navLink = document.querySelector(`nav ul li a[href="#${sectionId}"]`);

                     // Scroll-in Animation
                     if (entry.isIntersecting) {
                         section.classList.add('is-visible');
                         // Remove initial animation class if it exists
                         section.classList.remove('section-hidden');
                     } else {
                          // Optional: remove is-visible when it leaves the viewport
                          // This makes the animation run again if you scroll back up
                          // section.classList.remove('is-visible');
                          // section.classList.add('section-hidden'); // Re-add hidden class for re-triggering
                     }

                     // Active Nav Link (More reliable method)
                     // Find the section that is currently most visible or closest to the top
                      const visibleSection = sections.reduce((prev, current) => {
                          const prevRect = prev.getBoundingClientRect();
                          const currentRect = current.getBoundingClientRect();

                          // Prioritize sections whose top is just below the header or within a reasonable range
                          const isCurrentSectionAtTop = currentRect.top <= headerHeight + 50 && currentRect.bottom > headerHeight + 50;

                          if (isCurrentSectionAtTop) {
                              if (!prev || prevRect.top > currentRect.top) { // If current is higher up (closer to header)
                                  return current;
                              }
                          }
                           // If no section is precisely at the top, fall back to the one whose center is closest to viewport center
                           // (This part is less critical but can help when exactly between sections)
                          const prevCenterDist = prev ? Math.abs(prevRect.top + prevRect.height / 2 - window.innerHeight / 2) : Infinity;
                          const currentCenterDist = Math.abs(currentRect.top + currentRect.height / 2 - window.innerHeight / 2);

                          if (!isCurrentSectionAtTop && (!prev || currentCenterDist < prevCenterDist)) {
                               // return current; // Avoid this - stick to sections hitting the top area for primary logic
                          }

                          return prev; // Keep the previous best or null
                      }, null);


                     // Update active class based on the most visible section
                     if (visibleSection) {
                         navLi.forEach(a => {
                              a.classList.remove('active');
                               const linkSectionId = a.getAttribute('href').substring(1);
                              if (linkSectionId === visibleSection.getAttribute('id')) {
                                  a.classList.add('active');
                              }
                          });
                     } else {
                          // If somehow no section is clearly at the top (e.g., very top of page before first section),
                          // default to the first or hero link
                          if (window.scrollY < sections[0].offsetTop + sections[0].offsetHeight / 2) {
                               navLi.forEach(a => a.classList.remove('active'));
                               const heroLink = document.querySelector('nav ul li a[href="#hero"]');
                               if (heroLink) {
                                   heroLink.classList.add('active');
                               }
                          }
                     }
                 });
             }, observerOptions);

             // Add the initial animation class to sections (except hero) on DOM load
             document.addEventListener('DOMContentLoaded', () => {
                 sections.forEach(section => {
                     if (section.id !== 'hero') {
                         section.classList.add('section-hidden');
                     }
                      // Also ensure the hero section is visible initially
                      if (section.id === 'hero') {
                           section.classList.add('is-visible');
                      }
                 });
             });


             // Observe each section
             sections.forEach(section => {
                 sectionObserver.observe(section);
             });


             // Smooth scrolling for nav links
            document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault(); // Prevent default jump

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);

                    if (targetElement) {
                        const headerHeight = document.querySelector('header').offsetHeight;
                        // Calculate target position considering header height and adding a small offset
                        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight - 10;

                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });

                         // Close mobile menu after clicking a link
                        if (navMenu && navMenu.classList.contains('active')) {
                            setTimeout(() => {
                               navMenu.classList.remove('active');
                               menuToggle.setAttribute('aria-expanded', 'false');
                            }, 300);
                        }
                         // Let IntersectionObserver handle the active class update during scroll
                    }
                });
            });

             // Handle active class on initial load and resize if observer isn't enough
             // This function acts as a fallback/initial setter
              const updateActiveOnLoad = () => {
                  const headerHeight = header.offsetHeight;
                  let currentActiveSectionId = 'hero'; // Default to hero

                  for (let i = 0; i < sections.length; i++) {
                      const section = sections[i];
                       const rect = section.getBoundingClientRect();
                       // Check if the section's top is roughly at or above the bottom of the header offset
                       // A buffer (e.g., 10px) is often needed due to precision
                       if (rect.top <= headerHeight + 10) {
                           currentActiveSectionId = section.getAttribute('id');
                            // Continue loop to find the LOWEST section whose top is past the header
                           // This makes scrolling *down* correctly activate the next section
                       } else {
                            // If the current section's top is below the header,
                            // the previously checked section is the one currently at the top.
                            // We can break here assuming sections are ordered in HTML.
                            break;
                       }
                  }

                  navLi.forEach(a => {
                      a.classList.remove('active');
                       const linkSectionId = a.getAttribute('href').substring(1);
                      if (linkSectionId === currentActiveSectionId) {
                          a.classList.add('active');
                      }
                  });
              };

              // Add listener for initial load and resize
              window.addEventListener('load', updateActiveOnLoad);
              window.addEventListener('resize', updateActiveOnLoad); // Recalculate on resize
             // Also call it once the DOM is fully loaded to catch initial state before load event might fire
              document.addEventListener('DOMContentLoaded', updateActiveOnLoad);


        }


        // Drag and Drop Functionality
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('file');
        const fileInfo = document.getElementById('fileInfo');
        const contactForm = document.getElementById('contactForm');

        if (dropZone && fileInput && fileInfo) {
            // Prevent default drag behaviors
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
                // Don't prevent default for the entire body unless absolutely necessary,
                // it can break other drag/drop interactions on the page or extensions.
                // document.body.addEventListener(eventName, preventDefaults, false);
            });

            // Highlight drop zone on drag over
            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, highlight, false);
            });

            // Remove highlight on drag leave or drop
            ['dragleave', 'drop'].forEach(eventName => {
                 // Use a slight delay for dragleave to avoid flickering
                 if (eventName === 'dragleave') {
                      dropZone.addEventListener(eventName, () => setTimeout(() => dropZone.classList.remove('dragover'), 50), false);
                 } else {
                      dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);
                 }
            });


            // Handle dropped files
            dropZone.addEventListener('drop', handleDrop, false);

            // Handle file selection from input click
            fileInput.addEventListener('change', handleChange, false);

            // Make the drop zone clickable to open file dialog
            dropZone.addEventListener('click', () => fileInput.click());

            function preventDefaults(e) { e.preventDefault(); e.stopPropagation(); }

            function highlight() {
                dropZone.classList.add('dragover');
                // Keep existing file info/error message until a new file is actually selected
                // dropZone.classList.remove('error'); // Remove error state on new drag
                // fileInfo.classList.remove('error-message');
                // fileInfo.innerHTML = '';
            }

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFiles(files);
            }

            function handleChange(e) {
                const files = e.target.files;
                handleFiles(files);
            }

            function handleFiles(files) {
                 const file = files[0]; // We only expect one file
                 dropZone.classList.remove('error'); // Clear previous error states
                 fileInfo.classList.remove('error-message');
                 fileInfo.innerHTML = ''; // Clear previous message immediately

                 if (file) {
                     // Check file size (e.g., max 5MB) - adjust as needed
                     const maxSizeMB = 5;
                     const maxSizeBytes = maxSizeMB * 1024 * 1024;

                     if (!file.type.startsWith('image/')) {
                         // File is not an image
                         fileInput.value = ''; // Clear the file input
                         fileInfo.innerHTML = `<span style="color: var(--color-error-text);">Error: Please drop/select an **image file**.</span>`;
                         fileInfo.classList.add('error-message');
                         dropZone.classList.add('error'); // Add error state to drop zone
                     } else if (file.size > maxSizeBytes) {
                          // File is too large
                          fileInput.value = '';
                          fileInfo.innerHTML = `<span style="color: var(--color-error-text);">Error: File size exceeds ${maxSizeMB}MB. Please upload a smaller image.</span>`;
                          fileInfo.classList.add('error-message');
                          dropZone.classList.add('error');
                     }
                      else {
                         // File is a valid image and size, proceed
                         fileInput.files = files; // Set the file to the input
                         fileInfo.innerHTML = `Selected file: <strong>${file.name}</strong> (${(file.size / 1024).toFixed(2)} KB)`; // Display file info
                     }
                 } else {
                      // Handle case where no file was selected or drop was cancelled (user cancelled file dialog)
                      // Do nothing, keep previous state or reset if needed. Don't show error just because user cancelled.
                      // fileInput.value = '';
                      // fileInfo.innerHTML = '';
                 }
                 dropZone.classList.remove('dragover'); // Remove dragover class after handling
            }
        }


        // Form Submission Validation (Check for required file)
        if (contactForm && fileInput && fileInfo && dropZone) {
            contactForm.addEventListener('submit', function(event) {
                // Check if the file input has any files selected AND if it's required (which it is)
                // Update validation based on the text hint, not just the 'required' attribute
                // We need to check if it's a type of project where an image is required (portrait, character, specific concept)
                // Since we don't have dropdowns anymore, we can't know the project type directly.
                // For simplicity, let's make the file upload required for ALL inquiries via the form,
                // or add a message that makes it clear it's required for the types mentioned in the text.
                // Let's revert to making the input required via JS check.

                // Check if the file input has any files selected
                if (fileInput.files.length === 0) {
                    event.preventDefault(); // Stop the form from submitting
                    // Display error message and highlight the drop zone
                    fileInfo.innerHTML = 'A reference image is required for inquiry via this form. Please upload a file.';
                    fileInfo.classList.add('error-message');
                    dropZone.classList.add('error');
                    // Scroll to the drop zone to make the error visible
                    dropZone.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    // File is present, remove any previous error states and allow submission
                    fileInfo.classList.remove('error-message');
                    dropZone.classList.remove('error');
                    // Form will now submit normally via FormSubmit
                    // Note: Server-side validation is also crucial!
                }
            });
        }


        // Scroll to Top Button Logic
        const scrollToTopBtn = document.getElementById('scrollToTopBtn');
        const heroSection = document.getElementById('hero');

        if (scrollToTopBtn && heroSection) {
             window.addEventListener('scroll', () => {
                 // Show button if scrolled past the height of the hero section
                 const heroHeight = heroSection.offsetHeight;
                 // Show button if scrolled past 80% of the hero section's height
                 scrollToTopBtn.classList.toggle('visible', window.pageYOffset > heroHeight * 0.8);
             });

             // Smooth scroll to top on click
             scrollToTopBtn.addEventListener('click', () => {
                 window.scrollTo({ top: 0, behavior: 'smooth' });
             });
        }


        // --- Three.js Hero Section Setup ---
        const heroCanvas = document.getElementById('hero-canvas');
        const hero3dContainer = document.querySelector('.hero-3d-container');
        const heroFallbackMessage = document.getElementById('hero-fallback-message');

        if (heroCanvas && hero3dContainer) {
            // Check for WebGL support
            const isWebGLAvailable = (function () {
                try {
                    const canvas = document.createElement('canvas');
                    return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
                } catch (e) {
                    return false;
                }
            })();

            if (isWebGLAvailable) {
                // Hide fallback message if WebGL is available
                if (heroFallbackMessage) heroFallbackMessage.style.display = 'none';

                // 1. Create Scene, Camera, Renderer
                const scene = new THREE.Scene();
                // Adjust camera FOV or position if needed to frame the object better
                const camera = new THREE.PerspectiveCamera(60, hero3dContainer.clientWidth / hero3dContainer.clientHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas: heroCanvas, antialias: true, alpha: true }); // alpha: true for transparency

                renderer.setSize(hero3dContainer.clientWidth, hero3dContainer.clientHeight);
                renderer.setPixelRatio(window.devicePixelRatio); // Handle high DPI screens

                // 2. Add a Simple Geometry (e.g., a Box)
                 // Create a slightly more interesting shape, e.g., a Tetrahedron
                const geometry = new THREE.TetrahedronGeometry(2.5); // Adjust size

                // Using a more stylized material
                const material = new THREE.MeshPhongMaterial({
                    color: 0xbb86fc, // Primary color
                    shininess: 150, // Higher shininess
                    specular: 0xffffff, // White specular highlight
                    flatShading: true // Flat shading for geometric look
                });

                // 4. Create Mesh and Add to Scene
                const shape = new THREE.Mesh(geometry, material);
                scene.add(shape); // Add the shape instead of cube

                // 5. Add Lighting
                // Adjust lighting for better effect
                const ambientLight = new THREE.AmbientLight(0x404040, 0.8); // Softer ambient light
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5); // Main white light
                directionalLight.position.set(5, 5, 5).normalize();
                scene.add(directionalLight);

                 const pointLight1 = new THREE.PointLight(0x03dac6, 0.6); // Highlight color point light 1
                 pointLight1.position.set(-5, 5, -5);
                 scene.add(pointLight1);

                 const pointLight2 = new THREE.PointLight(0xbb86fc, 0.6); // Primary color point light 2
                 pointLight2.position.set(5, -5, 5);
                 scene.add(pointLight2);


                // 6. Position Camera
                camera.position.z = 5; // Move camera back

                // 7. Animation Loop
                const animate = () => {
                    requestAnimationFrame(animate);

                    // Rotate the object slightly slower or with more variation
                    shape.rotation.x += 0.003; // Slightly faster rotation
                    shape.rotation.y += 0.004; // Slightly faster rotation

                    renderer.render(scene, camera);
                };

                // 8. Handle Window Resize
                const onWindowResize = () => {
                    const width = hero3dContainer.clientWidth;
                    const height = hero3dContainer.clientHeight;
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                    renderer.setSize(width, height);
                };

                window.addEventListener('resize', onWindowResize);

                // Start the animation
                animate();

            } else {
                // WebGL is not supported, show fallback message and hide canvas
                 if (heroFallbackMessage) heroFallbackMessage.style.display = 'block';
                 if (heroCanvas) heroCanvas.style.display = 'none';

                 // Apply a static background color/image as a fallback
                 // hero3dContainer.style.backgroundImage = "url('path/to/your/fallback-image.jpg')"; // Optional: Add a fallback image
                 hero3dContainer.style.backgroundSize = "cover";
                 hero3dContainer.style.backgroundPosition = "center center";
                 hero3dContainer.style.backgroundColor = 'var(--color-bg-dark)'; // Ensure background color is set
            }
        }
         // --- End Three.js Setup ---

         // Add class for initial section animation
         document.addEventListener('DOMContentLoaded', () => {
             // Add section-hidden to all sections except the first one (#hero)
             document.querySelectorAll('section:not(#hero)').forEach(section => {
                 section.classList.add('section-hidden');
             });
         });


    </script>

</body>
</html>
